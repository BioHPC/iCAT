<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> • iCAT</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iCAT</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/iCAT.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/BioHPC/iCAT">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1></h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/BioHPC/iCAT/blob/master/vignettes/iCAT.Rmd"><code>vignettes/iCAT.Rmd</code></a></small>
      <div class="hidden name"><code>iCAT.Rmd</code></div>

    </div>

    
    
<p>iCAT aims to (1) identify TCR sequences that are significantly associated with target samples and (2) to binary-classify unkown samples. Users can either perform analysis using the Shiny graphical user interface, or directly on an R interpreter.</p>
<div id="graphical-user-interface-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#graphical-user-interface-workflow" class="anchor"></a>Graphical User Interface Workflow</h2>
<p>In R:</p>
<pre><code><a href="https://www.rdocumentation.org/packages/base/topics/library">library(iCAT)
iCATinteractive()</a></code></pre>
<p>This will launch a graphical user interface (GUI) for iCAT. The GUI has three tabs, separating major functionalities: training, library, and prediction.</p>
<p><strong>Training:</strong></p>
<p><br><img src="https://github.com/BioHPC/iCAT/blob/master/man/figures/icat.png?raw=true" title="Training"><br></p>
<ol style="list-style-type: decimal">
<li>In the <em>Training</em> tab, enter your negative training samples (naïve, unexposed, uninfected, pre-infection, etc) using the <code>Browse</code> button.</li>
</ol>
<p>Individual samples’ sequencing data should be in .tsv format.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Repeat step 1 for positive training samples (exposed, infected, etc.)</p></li>
<li>Choose if you want to analyze data by:</li>
</ol>
<ul>
<li>
<code>CDR3 Amino Acid Sequence</code> (TCRs will need the same CDR3 region to be called ‘Identical’)</li>
<li>
<code>TCRV-CDR3-TCRJ</code> (TCRs will need the same TCRBV segment, CDR3 region, and TCRJ segment to be called ‘Identical’) <em>Recommended</em>
</li>
<li>
<code>Nucleic Acid (DNA)</code> (TCRs will need the exact same DNA rearrangements/sequence across TCRBV, CDR3, and TCRJ)</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li><p>Choose the <code>Max p-value</code>, which determines the minimal degree of statistical significance that iCAT will accept as being potentially “associated” with the positive group. Defaults to <em>p</em> &lt; 0.1.</p></li>
<li><p>Choose the <code>Range of Acceptable Copies per Clonotype</code>, which determines the minimum and maximum number of copies a clonotype must have to be included in the analysis. Enter as a space delimted range. Defaults to <code>1 99</code>. An example of when this could be useful: in case there is expected artifacts in the processing/data that overestimate the copy number of some clonotypes.</p></li>
<li><p>Once all options are selected click <code>Train Model</code></p></li>
</ol>
<p>A progress bar will show on the bottom-right corner to update on the satatus of training. After finishing, the <em>training</em> tab will show some exploratory tables and a figure regarding the training data and the model built, which can all be downloaded to the user’s machine. In addition, the <em>library</em> and <em>prediction</em> tab will unlock.</p>
<p><strong>Library:</strong></p>
<p><br><img src="https://github.com/BioHPC/iCAT/blob/master/man/figures/lib-icat2.png?raw=true" title="Library"><br></p>
<p>The <em>Library</em> tab displays a table consisting of the “target associated receptor sequences” (TARS), determined to be statistically associated with exposure to the target/agent/pathogen. The table displays each sequence, number of positive and negative training samples the sequence is present in/absent from, and how statistically associated the sequence is to the positive training data (<em>p</em>-value). The table can be downloaded to the user’s computer for further analysis using excel, commandline, etc using the download <code>Table</code> button below the table.</p>
<p><strong>Prediction:</strong></p>
<p><br><img src="https://github.com/BioHPC/iCAT/blob/master/man/figures/pred-icat.png?raw=true" title="Prediction"><br></p>
<p>The <em>Prediction</em> tab allows the user to add sequencing data from unknown samples (e.g. not included in the previous training data) for classification as “Positive” or “Negative” and determining the accuracy of the diagnostic assay.</p>
<ol style="list-style-type: decimal">
<li>Use the <code>Browse</code> button to add samples for prediction. Multiple samples may be uploaded simultaneously.</li>
<li>Click <code>Predict Independent Sample</code>.</li>
</ol>
<p>A table will appear after analysis is complete. The table displays sample names along with the prediction “Positive” (red)/ “Negative” (blue), and displays the ‘%TARS’: the percent of individual sequences from the sample that are included in the TARS library. The prediction results can be downloaded as a table.</p>
</div>
<div id="r-interface-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#r-interface-workflow" class="anchor"></a>R-interface Workflow</h2>
<p>After loading iCAT with <code><a href="https://www.rdocumentation.org/packages/base/topics/library">library(iCAT)</a></code></p>
<ol style="list-style-type: decimal">
<li>Define the parameters you would like to use for building the model:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(iCAT)
## Loading required package: data.table
## 
## Attaching package: 'iCAT'
## The following object is masked from 'package:grDevices':
## 
##     savePlot
FIELD &lt;-<span class="st"> "aminoAcid vGeneName jGeneName"</span> <span class="co">#"aaSeqCDR3"</span>
COUNT &lt;-<span class="st"> "copy"</span>
COPY_RANGE &lt;-<span class="st"> "1 99"</span> 
P_CUTOFF &lt;-<span class="st"> </span><span class="fl">0.11</span>
MIN_PUBLIC &lt;-<span class="st"> </span><span class="dv">1</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Make lists of .tsv Positive and Negative training samples:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">listNeg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsvDir.html">tsvDir</a></span>(<span class="st">"~/Downloads/iCAT Data/Negative Training Data/"</span>)
listPos &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tsvDir.html">tsvDir</a></span>(<span class="st">"~/Downloads/iCAT Data/Positive Training Data/"</span>)</code></pre></div>
<ul>
<li>
<em>optional</em> Collect summary statistics about training samples:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/trnStats.html">trnStats</a></span>(listNeg, listPos, FIELD, COUNT, COPY_RANGE)
##          # Samples # Unique Sequences # Clonotypes
## Negative        32             714522      2049383
## Positive        58             573612      1581438</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Read in Positive and Negative training samples:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naive &lt;-<span class="st"> </span><span class="kw"><a href="../reference/readTrn.html">readTrn</a></span>(listNeg, FIELD, COUNT, COPY_RANGE, <span class="st">"naive"</span>)
vaccs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/readTrn.html">readTrn</a></span>(listPos, FIELD, COUNT, COPY_RANGE, <span class="st">"vacc"</span>)      </code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Build a model using the training data:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod &lt;-<span class="st"> </span><span class="kw"><a href="../reference/train.html">train</a></span>(naive, vaccs, listNeg, listPos, FIELD, COUNT, COPY_RANGE, P_CUTOFF, MIN_PUBLIC, <span class="ot">NULL</span>)</code></pre></div>
<ul>
<li>
<em>optional</em> Produce a table estimating the classification accuracy of the model:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/classMat.html">classMat</a></span>(mod)
##          Unexposed Exposed % Correct
## Negative        32       0       100
## Positive         0      58       100</code></pre></div>
<ul>
<li>
<em>optional</em> Produce a figure showing % of TCR associated with positve samples in positive and negative samples:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plotHist.html">plotHist</a></span>(mod)
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre></div>
<p><img src="iCAT_files/figure-html/unnamed-chunk-8-1.png" width="100%"> - <em>optional</em> Produce the library of TCR sequences associated with positve samples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getLib.html">getLib</a></span>(mod) 
##                                    Sequence Positive Present
##   1:   CASGARDNYAEQFF TCRBV13-02 TCRBJ02-01                5
##   2:      CASGAYAEQFF TCRBV13-02 TCRBJ02-01                5
##   3:   CASGDAGAEDTQYF TCRBV13-02 TCRBJ02-05                5
##   4:  CASGDAGGTQDTQYF TCRBV13-02 TCRBJ02-05                5
##   5: CASGDAGGVSQNTLYF TCRBV13-02 TCRBJ02-04                5
##  ---                                                        
## 310:  CASSSTGYNNQAPLF TCRBV14-01 TCRBJ01-05               11
## 311:  CTCSAEGVSNERLFF TCRBV01-01 TCRBJ01-04               11
## 312: CASSPRTGGSAETLYF TCRBV03-01 TCRBJ02-03               14
## 313:    CASSRDKQDTQYF TCRBV19-01 TCRBJ02-05               13
## 314:     CASSLGFYEQYF TCRBV03-01 TCRBJ02-07               14
##      Positive Absent Negative Present Negative Absent     P-Value
##   1:              53                0              32 0.104259211
##   2:              53                0              32 0.104259211
##   3:              53                0              32 0.104259211
##   4:              53                0              32 0.104259211
##   5:              53                0              32 0.104259211
##  ---                                                             
## 310:              47                0              32 0.005472755
## 311:              47                0              32 0.005472755
## 312:              44                1              31 0.007737122
## 313:              45                0              32 0.001920171
## 314:              44                0              32 0.001122178</code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#graphical-user-interface-workflow">Graphical User Interface Workflow</a></li>
      <li><a href="#r-interface-workflow">R-interface Workflow</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ahmad Rajeh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
